<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="robots" content="noindex, nofollow" />
    <link rel="icon shortcut" href="/_media/favicon.ico" sizes="32x32" />
    <link rel="icon" href="/_media/favicon.svg" type="image/svg+xml" />
    <link
      rel="icon"
      href="/_media/favicon-dark.svg"
      type="image/svg+xml"
      media="(prefers-color-scheme: dark)"
    />
    <link
      rel="icon"
      href="/_media/favicon-16x16.png"
      type="image/png"
      sizes="16x16"
    />
    <link
      rel="icon"
      href="/_media/favicon-32x32.png"
      type="image/png"
      sizes="32x32"
    />
    <link
      rel="apple-touch-icon"
      href="/_media/apple-touch-icon.png"
      sizes="180x180"
    />

    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/_vendor/dark.min.css" />
    <style>
      .giscus {
        width: 100% !important;
        padding: 5px;
        min-height: 200px;
      }
      .giscus iframe {
        width: 100% !important;
        border: 0;
        min-height: 200px;
      }
    </style>
  </head>
  <body>
    <nav>
      <a href="/">Home</a>
      <a href="https://hackintosh.club">Hackintosh.Club</a>
    </nav>
    <div id="app">Please wait...</div>
    <script>
      const ORG = "hackintosh-club";
      const CDN = "https://cdn.jsdelivr.net/gh/" + ORG;
      window.$docsify = {
        cdn: CDN,
        repo: "https://github.com/" + ORG,
        name: "<strong>EFIHub</strong>",
        alias: {
          "/r/_sidebar.md": "/_sidebar.md",
          "/r/(.*)": CDN + "/$1/README.md",
        },
        // routerMode: "history",
        themeColor: "#F36322",
        onlyCover: true,
        coverpage: true,
        loadSidebar: true,
        autoHeader: true,
        nativeEmoji: false,

        // baiduTongjiID
        baiduTongjiID: "a693e3c9fd4518f70373708ae51ceb65",
        // giscus
        giscus: {
          repo: ORG + "/efihub.comment",
          repoId: "R_kgDOLu2oNQ",
          category: "Comment",
          categoryId: "DIC_kwDOLu2oNc4CeuI7",
          mapping: "og:title",
          reactionsEnabled: "1",
          strict: "1",
          emitMetadata: "0",
          inputPosition: "top",
          theme: "transparent_dark",
          lang: "en",
          loading: "lazy",
        },
      };
    </script>
    <script src="/_vendor/docsify.min.js"></script>
    <script>
      (function () {
        var repoID = function (vm) {
          return vm.route.path.replace("/r/", "");
        };
        var repoPath = function (vm) {
          return ORG + "/" + repoID(vm);
        };
        var allowRoute = function (vm) {
          return vm.route.path.startsWith("/r");
        };
        var repoURL = function (vm) {
          return vm.config.repo + vm.route.path.replace("/r", "");
        };
        var cdnURL = function (vm) {
          return vm.config.cdn + vm.route.path.replace("/r", "") + "/";
        };
        var backlink = function (vm) {
          return new URL(window.location).origin + vm.route.path;
        };
        var shields = function (item, label, logo) {
          label = label ? "&label=" + label : "";
          logo = logo ? "&logo=" + logo : "";
          return `https://img.shields.io/${item}?cacheSeconds=3600&style=flat-square${label}${logo}`;
        };

        var contentPlugin = function (hook, vm) {
          hook.beforeEach(function (markdown) {
            // console.info("hook.beforeEach");
            if (!allowRoute(vm)) {
              return markdown;
            }

            const _cdnURL = cdnURL(vm);
            // replace markdown img src attributes
            markdown = markdown.replace(
              /!\[.*?\]\((?!http)(.*?)\)/g,
              (match, p1) => {
                return `![${match
                  .match(/\!\[.*?\]/)[0]
                  .slice(2, -1)}](${_cdnURL}${p1})`;
              }
            );

            // replace html img src attributes
            markdown = markdown.replace(
              /<img\s+([^>]*?)src=["'](?!http)([^"']+?)["']([^>]*)>/gi,
              (match, beforeSrc, src, afterSrc) => {
                return `<img ${beforeSrc}src="${_cdnURL}${src}"${afterSrc}>`;
              }
            );

            // remove README
            markdown = markdown.replace(
              /(#+)\s*\[.*?\]\(README.*?\.md\)\s*$/gm,
              ""
            );

            return markdown;
          });

          hook.doneEach(function () {
            // console.info("hook.doneEach");
            if (!allowRoute(vm)) {
              return;
            }

            const _repoURL = repoURL(vm);
            const _repoPath = repoPath(vm);
            const _github = shields("badge/Github-gray", "", "github");
            const _release = shields(
              `github/v/release/${_repoPath}`,
              "Latest EFI",
              "apple"
            );
            const _stars = shields(
              `github/stars/${_repoPath}`,
              "stars",
              "data:image/svg%2bxml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNMzE2LjkgMThDMzExLjYgNyAzMDAuNCAwIDI4OC4xIDBzLTIzLjQgNy0yOC44IDE4TDE5NSAxNTAuMyA1MS40IDE3MS41Yy0xMiAxLjgtMjIgMTAuMi0yNS43IDIxLjdzLS43IDI0LjIgNy45IDMyLjdMMTM3LjggMzI5IDExMy4yIDQ3NC43Yy0yIDEyIDMgMjQuMiAxMi45IDMxLjNzMjMgOCAzMy44IDIuM2wxMjguMy02OC41IDEyOC4zIDY4LjVjMTAuOCA1LjcgMjMuOSA0LjkgMzMuOC0yLjNzMTQuOS0xOS4zIDEyLjktMzEuM0w0MzguNSAzMjkgNTQyLjcgMjI1LjljOC42LTguNSAxMS43LTIxLjIgNy45LTMyLjdzLTEzLjctMTkuOS0yNS43LTIxLjdMMzgxLjIgMTUwLjMgMzE2LjkgMTh6Ii8+PC9zdmc+"
            );
            const _downloads = shields(
              `github/downloads/${_repoPath}/total`,
              "downloads",
              "data:image/svg%2bxml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjg4IDMyYzAtMTcuNy0xNC4zLTMyLTMyLTMycy0zMiAxNC4zLTMyIDMybDAgMjQyLjctNzMuNC03My40Yy0xMi41LTEyLjUtMzIuOC0xMi41LTQ1LjMgMHMtMTIuNSAzMi44IDAgNDUuM2wxMjggMTI4YzEyLjUgMTIuNSAzMi44IDEyLjUgNDUuMyAwbDEyOC0xMjhjMTIuNS0xMi41IDEyLjUtMzIuOCAwLTQ1LjNzLTMyLjgtMTIuNS00NS4zIDBMMjg4IDI3NC43IDI4OCAzMnpNNjQgMzUyYy0zNS4zIDAtNjQgMjguNy02NCA2NGwwIDMyYzAgMzUuMyAyOC43IDY0IDY0IDY0bDM4NCAwYzM1LjMgMCA2NC0yOC43IDY0LTY0bDAtMzJjMC0zNS4zLTI4LjctNjQtNjQtNjRsLTEwMS41IDAtNDUuMyA0NS4zYy0yNSAyNS02NS41IDI1LTkwLjUgMEwxNjUuNSAzNTIgNjQgMzUyem0zNjggNTZhMjQgMjQgMCAxIDEgMCA0OCAyNCAyNCAwIDEgMSAwLTQ4eiIvPjwvc3ZnPg=="
            );
            var main = document.querySelector("#main");
            var div = document.createElement("div");
            div.innerHTML =
              `<a href="${_repoURL}" title="${_repoPath}" target="_blank"><img src="${_github}"></a> ` +
              `<a href="${_repoURL}/releases" title="Latest EFI Release" target="_blank"><img src="${_release}"></a> ` +
              `<span><img title="downloads" src="${_downloads}"></span> ` +
              `<span><img title="stars" src="${_stars}"></span> `;
            main.insertBefore(div, main.childNodes[1]);
          });
        };

        var baiduTongjiPlugin = function (hook, vm) {
          hook.mounted(function () {
            // console.info("hook.mounted");
            if (!vm.config.baiduTongjiID) {
              return;
            }

            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?" + vm.config.baiduTongjiID;
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          });
        };

        var giscusPlugin = function (hook, vm) {
          const meta = {
            ogtitle: { property: "og:title" },
            backlink: { name: "giscus:backlink" },
          };

          hook.mounted(function () {
            // console.info("hook.mounted");
            var head = document.getElementsByTagName("head")[0];
            for (const [id, attr] of Object.entries(meta)) {
              var el = document.createElement("meta");
              el.id = id;
              for (const [k, v] of Object.entries(attr)) {
                el.setAttribute(k, v);
              }
              head.appendChild(el);
            }
          });

          hook.afterEach(function (html) {
            // console.info("hook.afterEach");
            if (!allowRoute(vm)) {
              return html;
            }

            if (document.querySelector("#ogtitle")) {
              document
                .querySelector("#ogtitle")
                .setAttribute("content", repoID(vm).toLowerCase());
            }
            if (document.querySelector("#backlink")) {
              document
                .querySelector("#backlink")
                .setAttribute("content", backlink(vm));
            }

            if (document.querySelector("#giscus")) {
              document.querySelector("#giscus").remove();
            }
            var giscus = document.createElement("script");
            giscus.id = "giscus";
            giscus.src = "https://giscus.app/client.js";
            giscus.crossorigin = "anonymous";
            giscus.async = true;
            for (const [k, v] of Object.entries(vm.config.giscus)) {
              giscus.dataset[k] = v;
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(giscus, s);

            return html + "<div class='giscus'></div>";
          });
        };

        // Add plugin to docsify's plugin array
        $docsify = $docsify || {};
        $docsify.plugins = [].concat(
          contentPlugin,
          giscusPlugin,
          baiduTongjiPlugin,
          $docsify.plugins || []
        );
      })();
    </script>
    <script src="/_vendor/zoom-image.min.js"></script>
  </body>
</html>
