<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="robots" content="noindex, nofollow" />
    <link rel="icon shortcut" href="/_media/favicon.ico" sizes="32x32" />
    <link rel="icon" href="/_media/favicon.svg" type="image/svg+xml" />
    <link
      rel="icon"
      href="/_media/favicon-dark.svg"
      type="image/svg+xml"
      media="(prefers-color-scheme: dark)"
    />
    <link
      rel="icon"
      href="/_media/favicon-16x16.png"
      type="image/png"
      sizes="16x16"
    />
    <link
      rel="icon"
      href="/_media/favicon-32x32.png"
      type="image/png"
      sizes="32x32"
    />
    <link
      rel="apple-touch-icon"
      href="/_media/apple-touch-icon.png"
      sizes="180x180"
    />

    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/_vendor/dark.min.css" />
    <style>
      .giscus {
        width: 100% !important;
        padding: 5px;
        min-height: 200px;
      }
      .giscus iframe {
        width: 100% !important;
        border: 0;
        min-height: 200px;
      }
    </style>
  </head>
  <body>
    <nav>
      <a href="/">Home</a>
      <a href="https://hackintosh.club">Hackintosh.Club</a>
    </nav>
    <div id="app">Please wait...</div>
    <script>
      const CDN = "https://cdn.jsdelivr.net/gh/hackintosh-club";
      window.$docsify = {
        cdn: CDN,
        repo: "https://github.com/hackintosh-club",
        name: "<strong>EFIHub</strong>",
        alias: {
          "/r/_sidebar.md": "/_sidebar.md",
          "/r/(.*)": CDN + "/$1/README.md",
        },
        // routerMode: "history",
        themeColor: "#F36322",
        onlyCover: true,
        coverpage: true,
        loadSidebar: true,
        autoHeader: true,
        nativeEmoji: false,

        // baiduTongjiID
        baiduTongjiID: "a693e3c9fd4518f70373708ae51ceb65",
        // giscus
        giscus: {
          repo: "hackintosh-club/efihub.comment",
          repoId: "R_kgDOLu2oNQ",
          category: "Comment",
          categoryId: "DIC_kwDOLu2oNc4CeuI7",
          mapping: "og:title",
          reactionsEnabled: "1",
          strict: "1",
          emitMetadata: "0",
          inputPosition: "top",
          theme: "transparent_dark",
          lang: "en",
          loading: "lazy",
        },
      };
    </script>
    <script src="/_vendor/docsify.min.js"></script>
    <script>
      (function () {
        const xid = function (vm) {
          const _xid = vm.route.path.replace("/r/", "").toLowerCase();
          // console.info("xid", _xid);
          return _xid;
        };
        const allowRoute = function (vm) {
          return vm.route.path.startsWith("/r");
        };
        const baseURL = function (vm) {
          const _url = vm.config.cdn + vm.route.path.replace("/r", "") + "/";
          // console.info("baseURL", _url);
          return _url;
        };

        var redirctPlugin = function (hook, vm) {
          hook.mounted(function () {
            const uri = new URL(window.location.href);
            console.info("redirctPlugin", uri);
            if (uri.searchParams.has("giscus")) {
              setTimeout(() => {
                window.location.href = "/";
              }, 500);
            }
          });
        };

        var contentPlugin = function (hook, vm) {
          hook.beforeEach(function (markdown) {
            // console.info("hook.beforeEach");
            if (!allowRoute(vm)) {
              return markdown;
            }

            // Replace image src attributes
            markdown = markdown.replace(
              /!\[.*?\]\((?!http)(.*?)\)/g,
              (match, p1) => {
                return `![${match
                  .match(/\!\[.*?\]/)[0]
                  .slice(2, -1)}](${baseURL(vm)}${p1})`;
              }
            );

            // delete README
            markdown = markdown.replace(
              /(#+)\s*\[.*?\]\(README.*?\.md\)\s*$/gm,
              ""
            );

            return markdown;
          });
        };

        var baiduTongjiPlugin = function (hook, vm) {
          hook.mounted(function () {
            // console.info("hook.mounted");
            if (!vm.config.baiduTongjiID) {
              return;
            }
            const id = vm.config.baiduTongjiID;
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?" + id;
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          });
        };

        var giscusPlugin = function (hook, vm) {
          const meta = {
            ogtitle: { property: "og:title" },
            backlink: { name: "giscus:backlink" },
          };

          hook.mounted(function () {
            // console.info("hook.mounted");
            var head = document.getElementsByTagName("head")[0];
            for (const [id, attr] of Object.entries(meta)) {
              var el = document.createElement("meta");
              el.id = id;
              for (const [k, v] of Object.entries(attr)) {
                el.setAttribute(k, v);
              }
              head.appendChild(el);
            }
          });

          hook.afterEach(function (html) {
            // console.info("hook.afterEach");
            if (!allowRoute(vm)) {
              return html;
            }

            const _xid = xid(vm);
            if (document.querySelector("#ogtitle")) {
              document.querySelector("#ogtitle").setAttribute("content", _xid);
            }
            if (document.querySelector("#backlink")) {
              document
                .querySelector("#backlink")
                .setAttribute(
                  "content",
                  window.location.protocol +
                    "//" +
                    window.location.host +
                    "/r/" +
                    _xid
                );
            }

            if (document.querySelector("#giscus")) {
              document.querySelector("#giscus").remove();
            }
            var giscus = document.createElement("script");
            giscus.id = "giscus";
            giscus.src = "https://giscus.app/client.js";
            giscus.crossorigin = "anonymous";
            giscus.async = true;
            for (const [k, v] of Object.entries(vm.config.giscus)) {
              giscus.dataset[k] = v;
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(giscus, s);

            return html + "<div class='giscus'></div>";
          });
        };

        // Add plugin to docsify's plugin array
        $docsify = $docsify || {};
        $docsify.plugins = [].concat(
          redirctPlugin,
          contentPlugin,
          giscusPlugin,
          baiduTongjiPlugin,
          $docsify.plugins || []
        );
      })();
    </script>
    <script src="/_vendor/zoom-image.min.js"></script>
  </body>
</html>
